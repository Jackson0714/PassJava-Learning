{"version":3,"file":"docsify-plugin-flexible-alerts.min.js","sources":["../src/index.js","../node_modules/style-inject/dist/style-inject.es.js"],"sourcesContent":["// eslint-disable-next-line no-unused-vars\nimport styles from './style.scss';\n\n(function () {\n  const CONFIG = {\n    style: 'callout',\n    note: {\n      label: 'Note',\n      icon: 'icon-note',\n      className: 'note'\n    },\n    tip: {\n      label: 'Tip',\n      icon: 'icon-tip',\n      className: 'tip'\n    },\n    warning: {\n      label: 'Warning',\n      icon: 'icon-warning',\n      className: 'warning'\n    },\n    attention: {\n      label: 'Attention',\n      icon: 'icon-attention',\n      className: 'attention'\n    },\n    // To support further keys in plugin we do an automated mapping between alert types.\n    typeMappings: {\n      info: 'note',\n      danger: 'attention'\n    }\n  };\n\n  function mergeObjects(obj1, obj2, level = 0) {\n    for (const property in obj2) {\n      try {\n        // Property in destination object set; update its value.\n        if (obj2[property].constructor === Object && level < 1) {\n          obj1[property] = mergeObjects(obj1[property], obj2[property], level + 1);\n        } else {\n          obj1[property] = obj2[property];\n        }\n      } catch(e) {\n        // Property in destination object not set; create it and set its value.\n        obj1[property] = obj2[property];\n      }\n    }\n\n    return obj1;\n  }\n\n  const install = function (hook, vm) {\n    const options = mergeObjects(CONFIG, vm.config['flexible-alerts'] || vm.config.flexibleAlerts);\n\n    const findSetting = function findAlertSetting(input, key, fallback, callback) {\n      const match = (input || '').match(new RegExp(`${key}:(([\\\\s\\\\w\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF-]*))`));\n\n      if (!match) {\n        return callback ? callback(fallback) : fallback;\n      }\n\n      return callback ? callback(match[1]) : match[1];\n    };\n\n    hook.afterEach(function (html, next) {\n      const modifiedHtml = html.replace(/<\\s*blockquote[^>]*>(?:<p>|[\\S\\n]*)?\\[!(\\w*)((?:\\|[\\w*:[\\s\\w\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF-]*)*?)\\]([\\s\\S]*?)(?:<\\/p>)?<\\s*\\/\\s*blockquote>/g, function (match, key, settings, value) {\n\n        if (!options[key.toLowerCase()] && options.typeMappings[key.toLowerCase()]) {\n          key = options.typeMappings[key.toLowerCase()];\n        }\n\n        const config = options[key.toLowerCase()];\n\n        if (!config) {\n          return match;\n        }\n\n        const style = findSetting(settings, 'style', options.style);\n        let isIconVisible = findSetting(settings, 'iconVisibility', 'visible', (value) => value !== 'hidden');\n        let isLabelVisible = findSetting(settings, 'labelVisibility', 'visible', (value) => value !== 'hidden');\n        let label = findSetting(settings, 'label', config.label);\n        const icon = findSetting(settings, 'icon', config.icon);\n        const className = findSetting(settings, 'className', config.className);\n\n        // Label can be language specific and could be specified via user configuration\n        if (typeof label === 'object') {\n          const foundLabel = Object.keys(label).filter(function (key) {\n            return vm.route.path.indexOf(key) > -1;\n          });\n\n          if (foundLabel && foundLabel.length > 0) {\n            label = label[foundLabel[0]];\n          } else {\n            isLabelVisible = false;\n            isIconVisible = false;\n          }\n        }\n\n        const iconTag = `<span class=\"icon ${icon}\"></span>`;\n        const titleTag = `<p class=\"title\">${isIconVisible ? iconTag : ''}${isLabelVisible ? label : ''}</p>`;\n\n        return (\n          `<div class=\"alert ${style} ${className}\">\n            ${isIconVisible || isLabelVisible ? titleTag : '' }\n            <p>${value}</p>\n          </div>`\n        );\n      });\n\n      next(modifiedHtml);\n    });\n  };\n\n  window.$docsify = window.$docsify || {};\n  window.$docsify.plugins = [].concat(install, window.$docsify.plugins);\n}());\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n"],"names":["CONFIG","css","ref","head","style","insertAt","document","getElementsByTagName","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","note","label","icon","className","tip","warning","attention","typeMappings","info","danger","window","$docsify","plugins","concat","hook","vm","findSetting","input","key","fallback","callback","match","RegExp","options","mergeObjects","obj1","obj2","property","level","constructor","Object","e","config","flexibleAlerts","afterEach","html","next","replace","settings","value","toLowerCase","foundLabel","isIconVisible","isLabelVisible","_typeof","keys","filter","route","path","indexOf","length","iconTag","titleTag"],"mappings":";;;;;;;kQAIQA,GCJR,SAAqBC,EAAKC,QACX,IAARA,IAAiBA,EAAM,IAC5B,IAIIC,EACAC,EALAC,EAAWH,EAAIG,SAEdJ,GAA2B,oBAAbK,WAEfH,EAAOG,SAASH,MAAQG,SAASC,qBAAqB,QAAQ,IAC9DH,EAAQE,SAASE,cAAc,UAC7BC,KAAO,WAEI,QAAbJ,GACEF,EAAKO,WACPP,EAAKQ,aAAaP,EAAOD,EAAKO,YAKhCP,EAAKS,YAAYR,GAGfA,EAAMS,WACRT,EAAMS,WAAWC,QAAUb,EAE3BG,EAAMQ,YAAYN,SAASS,eAAed,44LDnBtCD,EAAS,CACbI,MAAO,UACPY,KAAM,CACJC,MAAO,OACPC,KAAM,YACNC,UAAW,QAEbC,IAAK,CACHH,MAAO,MACPC,KAAM,WACNC,UAAW,OAEbE,QAAS,CACPJ,MAAO,UACPC,KAAM,eACNC,UAAW,WAEbG,UAAW,CACTL,MAAO,YACPC,KAAM,iBACNC,UAAW,aAGbI,aAAc,CACZC,KAAM,OACNC,OAAQ,cAoFZC,OAAOC,SAAWD,OAAOC,UAAY,GACrCD,OAAOC,SAASC,QAAU,GAAGC,OA/Db,SAAUC,EAAMC,GAGV,SAAdC,EAAwCC,EAAOC,EAAKC,EAAUC,OAC5DC,GAASJ,GAAS,IAAII,MAAM,IAAIC,iBAAUJ,2EAE3CG,EAIED,EAAWA,EAASC,EAAM,IAAMA,EAAM,GAHpCD,EAAWA,EAASD,GAAYA,MANrCI,WAnBCC,EAAaC,EAAMC,SACfC,EADqBC,mCAAQ,MAC7BD,KAAYD,MAGfA,EAAKC,GAAUE,cAAgBC,QAAUF,EAAQ,EACnDH,EAAKE,GAAYH,EAAaC,EAAKE,GAAWD,EAAKC,GAAWC,EAAQ,GAEtEH,EAAKE,GAAYD,EAAKC,GAExB,MAAMI,GAENN,EAAKE,GAAYD,EAAKC,UAInBF,EAISD,CAAaxC,EAAQ+B,EAAGiB,OAAO,oBAAsBjB,EAAGiB,OAAOC,gBAY/EnB,EAAKoB,UAAU,SAAUC,EAAMC,GA6C7BA,EA5CqBD,EAAKE,QAAQ,wJAAyJ,SAAUhB,EAAOH,EAAKoB,EAAUC,IAEpNhB,EAAQL,EAAIsB,gBAAkBjB,EAAQhB,aAAaW,EAAIsB,iBAC1DtB,EAAMK,EAAQhB,aAAaW,EAAIsB,oBAG3BR,EAAST,EAAQL,EAAIsB,mBAEtBR,SACIX,MAYDoB,EATFrD,EAAQ4B,EAAYsB,EAAU,QAASf,EAAQnC,OACjDsD,EAAgB1B,EAAYsB,EAAU,iBAAkB,UAAW,SAACC,SAAoB,WAAVA,IAC9EI,EAAiB3B,EAAYsB,EAAU,kBAAmB,UAAW,SAACC,SAAoB,WAAVA,IAChFtC,EAAQe,EAAYsB,EAAU,QAASN,EAAO/B,OAC5CC,EAAOc,EAAYsB,EAAU,OAAQN,EAAO9B,MAC5CC,EAAYa,EAAYsB,EAAU,YAAaN,EAAO7B,WAGvC,WAAjByC,EAAO3C,MACHwC,EAAaX,OAAOe,KAAK5C,GAAO6C,OAAO,SAAU5B,UAChB,EAA9BH,EAAGgC,MAAMC,KAAKC,QAAQ/B,OAGO,EAApBuB,EAAWS,OAC3BjD,EAAQA,EAAMwC,EAAW,IAGzBC,EADAC,GAAiB,OAKfQ,8BAA+BjD,eAC/BkD,6BAA+BV,EAAgBS,EAAU,WAAKR,EAAiB1C,EAAQ,6CAGtEb,cAASe,6BAC1BuC,GAAiBC,EAAiBS,EAAW,+BAC1Cb,kCAU8B7B,OAAOC,SAASC"}