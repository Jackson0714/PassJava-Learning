# 深入理解 Nacos 的架构原理之注册中心

大家好，我是悟空呀，上次我们讲解了 [Nacos 的配置和使用](https://mp.weixin.qq.com/s/7EJTSw5WGE5bYbo00nZ4jA)，Nacos 为服务注册中心、配置中心，对开发和运维同学是非常友好的。为什么 Nacos 这么优秀呢？这次我们就要来探索下 Nacos 的内核原理了。

首先我们心中对 Nacos 一定有些许疑问：

- 
- 

Nacos



加上希望可以和 Raft 算法库的支持团队 随时沟通交流，因此选择了 JRaft，选择 JRaft 也是因为 JRaft 支持多 RaftGroup，为 Nacos 后 面的多数据分片带来了可能。

Distro 协议是阿里巴巴自研的一个最终一致性协议。Distro 算法是集 Gossip 以及 Eureka 协议的优点并加以优化而出 来的，对于原生的 Gossip，由于随机选取发送消息的节点，也就不可避免的存在消息重复发送给同 一节点的情况，增加了网络的传输的压力，也给消息节点带来额外的处理负载，而 Distro 算法引入 了权威 Server 的概念，每个节点负责一部分数据以及将自己的数据同步给其他节点，有效的降低 了消息冗余的问题。



Nacos 的保证了 AP 和 CP，

Nacos 注册中心采用 AP（最终一致性），为什么不采用强一致性？

最终一致共识算法的话，更多保障服务的可用性，并且能够保证在一定的时间内各 个节点之间的数据能够达成一致。如果采用强一致性，只要有一台机器宕机，那么整个集群是不可用的。

配置管理为了保证所有机器上的配置都是一致的，采用了强一致性共识算法。

